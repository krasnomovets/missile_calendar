<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Missile Attack Calendar</title>
  
  <!-- React Dependencies -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.8/babel.min.js"></script>

  <style>
    .calendar-container {
      max-width: 600px;
      margin: 0 auto;
      background-color: white;
    }

    .months-grid {
      display: grid;
      gap: 32px;
      grid-template-columns: repeat(4, 1fr);
    }

    @media (max-width: 400px) {
      .months-grid {
        grid-template-columns: repeat(3, 1fr);
      }
    }

    .month {
      display: flex;
      flex-direction: column;
    }

    .month-label {
      font-size: 14px;
      color: #666;
      margin-bottom: 4px;
    }

    .weekdays-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      margin-bottom: 6px;
    }

    .weekday-label {
      font-size: 10px;
      color: #999;
      text-align: center;
    }

    .days-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 2px;
    }

    .day-square {
      aspect-ratio: 1;
    }

    .day-content {
      width: 100%;
      height: 100%;
      background-color: #f5f5f5;
    }
  </style>
</head>
<body>
  <div id="missile-calendar"></div>

  <script type="text/babel">
    // Mock data
    const mockData = [
      { date: '2024-01-03', launched: 15, type: 'Missile' },
      { date: '2024-01-06', launched: 80, type: 'Missile' },
      { date: '2024-01-08', launched: 122, type: 'Missile' },
      { date: '2024-01-15', launched: 40, type: 'Missile' },
      { date: '2024-03-22', launched: 88, type: 'Missile' },
      { date: '2024-03-24', launched: 45, type: 'Missile' },
      { date: '2024-02-07', launched: 35, type: 'Missile' },
      { date: '2024-04-11', launched: 52, type: 'Missile' },
      { date: '2024-05-03', launched: 29, type: 'Missile' },
      { date: '2024-06-16', launched: 67, type: 'Missile' },
      { date: '2024-11-17', launched: 120, type: 'Missile' },
      { date: '2024-11-28', launched: 91, type: 'Missile' },
      { date: '2024-12-29', launched: 122, type: 'Missile' },
    ];

    // Calendar Component
    const CalendarHeatmap = () => {
      const [windowWidth, setWindowWidth] = React.useState(window.innerWidth);
      
      React.useEffect(() => {
        const handleResize = () => setWindowWidth(window.innerWidth);
        window.addEventListener('resize', handleResize);
        return () => window.removeEventListener('resize', handleResize);
      }, []);

      const monthsPerRow = windowWidth < 400 ? 3 : 4;

      const getIntensity = (value) => {
        const maxValue = 122;
        return Math.min((value / maxValue) * 100, 100);
      };

      const monthNames = ['jan', 'feb', 'mar', 'apr', 'mai', 'jun', 
                         'jul', 'aug', 'sep', 'okt', 'nov', 'des'];
      const weekDays = ['M', 'T', 'O', 'T', 'F', 'L', 'S'];

      return (
        <div className="calendar-container">
          <div className="months-grid">
            {Array.from({ length: 12 }, (_, monthIndex) => (
              <div key={monthIndex} className="month">
                <div className="month-label">
                  {monthNames[monthIndex]}
                </div>
                
                <div className="weekdays-grid">
                  {weekDays.map((day, i) => (
                    <div key={i} className="weekday-label">
                      {day}
                    </div>
                  ))}
                </div>
                
                <div className="days-grid">
                  {Array.from({ length: new Date(2024, monthIndex, 1).getDay() }, (_, i) => (
                    <div key={`empty-${i}`} className="day-square" />
                  ))}
                  
                  {Array.from(
                    { length: new Date(2024, monthIndex + 1, 0).getDate() },
                    (_, i) => {
                      const date = new Date(2024, monthIndex, i + 1);
                      const dateStr = date.toISOString().split('T')[0];
                      const dayData = mockData.find(d => d.date === dateStr);
                      const intensity = dayData ? getIntensity(dayData.launched) : 0;
                      
                      return (
                        <div
                          key={i}
                          className="day-square"
                          title={dayData ? `${dayData.launched} missiles` : 'No data'}
                        >
                          <div 
                            className="day-content"
                            style={{
                              backgroundColor: intensity > 0 
                                ? `rgba(220, 38, 38, ${intensity / 100})`
                                : '#f5f5f5'
                            }}
                          />
                        </div>
                      );
                    }
                  )}
                </div>
              </div>
            ))}
          </div>
        </div>
      );
    };

    // Render the app
    const root = ReactDOM.createRoot(document.getElementById('missile-calendar'));
    root.render(<CalendarHeatmap />);
  </script>
</body>
</html>
